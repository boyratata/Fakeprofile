(function(v,T,I,e,m,l,b,h,n,E,L){"use strict";const{View:N,TouchableOpacity:V,Text:le}=e.ReactNative,j=[{hex:"FF0000",name:"Red"},{hex:"00FF00",name:"Green"},{hex:"0000FF",name:"Blue"},{hex:"FFFF00",name:"Yellow"},{hex:"FF00FF",name:"Magenta"},{hex:"00FFFF",name:"Cyan"},{hex:"FFFFFF",name:"White"},{hex:"000000",name:"Black"}],C=e.stylesheet.createThemedStyleSheet({container:{flexDirection:"row",flexWrap:"wrap",padding:10},colorBox:{width:40,height:40,margin:5,borderRadius:8,borderWidth:2},selected:{borderColor:"#fff"},unselected:{borderColor:"transparent"}});function W({value:a,onChange:t}){return e.React.createElement(N,{style:C.container},j.map(function(r){return e.React.createElement(V,{key:r.hex,onPress:function(){return t(r.hex)},style:[C.colorBox,{backgroundColor:`#${r.hex}`},a===r.hex?C.selected:C.unselected],accessibilityLabel:r.name})}))}const{FormSwitchRow:fe,FormIcon:ue,FormRow:de}=m.Forms,{View:S,Text:F,TouchableOpacity:_,Modal:z}=m.General,u=e.stylesheet.createThemedStyleSheet({overlay:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center"},modal:{backgroundColor:"#2b2d31",borderRadius:8,padding:20,minWidth:300,maxWidth:350,margin:20},title:{color:"#ffffff",fontSize:18,fontWeight:"600",textAlign:"center",marginBottom:20},preview:{flexDirection:"row",alignItems:"center",marginBottom:15,padding:8,backgroundColor:"#1e1f22",borderRadius:6},colorBox:{width:32,height:32,borderRadius:6,marginRight:10,borderWidth:1,borderColor:"#ffffff20"},colorText:{color:"#ffffff",fontSize:14,fontWeight:"500",fontFamily:"monospace"},buttonRow:{flexDirection:"row",justifyContent:"space-between",marginTop:20,gap:10},button:{flex:1,paddingVertical:12,paddingHorizontal:16,borderRadius:6,alignItems:"center"},cancelButton:{backgroundColor:"#4f545c"},confirmButton:{backgroundColor:"#5865f2"},buttonText:{color:"#ffffff",fontSize:14,fontWeight:"600"}});function D({visible:a,title:t,initialValue:r="",onConfirm:o,onCancel:i}){const[d,s]=e.React.useState(r);e.React.useEffect(function(){s(r)},[r,a]);const R=function(){o(d)};return e.React.createElement(z,{visible:a,transparent:!0,animationType:"fade"},e.React.createElement(_,{style:u.overlay,onPress:i,activeOpacity:1},e.React.createElement(_,{style:u.modal,activeOpacity:1},e.React.createElement(F,{style:u.title},t),e.React.createElement(S,{style:u.preview},e.React.createElement(S,{style:[u.colorBox,{backgroundColor:d?`#${d}`:"#000000"}]}),e.React.createElement(e.ReactNative.TextInput,{style:[u.colorText,{backgroundColor:"#1e1f22",paddingHorizontal:8,paddingVertical:4,borderRadius:4,minWidth:80}],value:d,placeholder:"000000",placeholderTextColor:"#ffffff",onChangeText:s,maxLength:6})),e.React.createElement(W,{value:d,onChange:s}),e.React.createElement(S,{style:u.buttonRow},e.React.createElement(_,{style:[u.button,u.cancelButton],onPress:i},e.React.createElement(F,{style:u.buttonText},"Cancel")),e.React.createElement(_,{style:[u.button,u.confirmButton],onPress:R},e.React.createElement(F,{style:u.buttonText},"Confirm"))))))}const{ScrollView:O}=m.General,{FormSection:A,FormRow:c,FormSwitchRow:p}=m.Forms;function H(){L.useProxy(n.storage);const[a,t]=e.React.useState(!1),[r,o]=e.React.useState(!1),i=function(s,R){const x=`[#${s.toString(16).padStart(6,"0")},#${R.toString(16).padStart(6,"0")}]`;return" "+Array.from(x).map(function(w){return w.codePointAt(0)}).filter(function(w){return w>=32&&w<=127}).map(function(w){return String.fromCodePoint(w+917504)}).join("")},d=async function(){try{const s=n.storage.sw_primary?.padStart(6,"0")||"000000",R=n.storage.sw_accent?.padStart(6,"0")||"000000";if(!/^[0-9A-Fa-f]{6}$/.test(s)||!/^[0-9A-Fa-f]{6}$/.test(R))throw new Error("Invalid hex color");const x=i(parseInt(s,16),parseInt(R,16));e.clipboard.setString(x),E.showToast("Copied to clipboard!",l.getAssetIDByName("check"))}catch{E.showToast("Failed to copy 3y3 color",l.getAssetIDByName("small"))}};return e.React.createElement(O,null,e.React.createElement(A,{title:"Settings"},e.React.createElement(p,{label:"Enable profile effects",subLabel:"If enabled, profile effects will load up.",leading:e.React.createElement(c.Icon,{source:l.getAssetIDByName("settings")}),value:n.storage.sw_effects,onValueChange:function(s){return n.storage.sw_effects=s}}),e.React.createElement(p,{label:"Enable profile themes",subLabel:"If enabled, profile themes will load up.",leading:e.React.createElement(c.Icon,{source:l.getAssetIDByName("settings")}),value:n.storage.sw_themes,onValueChange:function(s){return n.storage.sw_themes=s}}),e.React.createElement(p,{label:"Enable profile avatar decoration",subLabel:"If enabled, profile avatar decoration will load up.",leading:e.React.createElement(c.Icon,{source:l.getAssetIDByName("settings")}),value:n.storage.sw_decorations,onValueChange:function(s){return n.storage.sw_decorations=s}}),e.React.createElement(p,{label:"Enable profile banners",subLabel:"If enabled, profile effects will load up.",leading:e.React.createElement(c.Icon,{source:l.getAssetIDByName("settings")}),value:n.storage.sw_banners,onValueChange:function(s){return n.storage.sw_banners=s}}),e.React.createElement(p,{label:"Enable profile avatars",subLabel:"If enabled, profile avatars will load up.",leading:e.React.createElement(c.Icon,{source:l.getAssetIDByName("settings")}),value:n.storage.sw_avatars,onValueChange:function(s){return n.storage.sw_avatars=s}}),e.React.createElement(p,{label:"Enable custom badges",subLabel:"If enabled, custom badges will load up.",leading:e.React.createElement(c.Icon,{source:l.getAssetIDByName("settings")}),value:n.storage.sw_badges,onValueChange:function(s){return n.storage.sw_badges=s}})),e.React.createElement(A,{title:"3y3 Colors"},e.React.createElement(c,{label:"Primary Color",subLabel:`Current: ${n.storage.sw_primary||"none"}`,leading:e.React.createElement(c.Icon,{source:l.getAssetIDByName("ic_message_edit")}),onPress:function(){return t(!0)}}),e.React.createElement(c,{label:"Accent Color",subLabel:`Current: ${n.storage.sw_accent||"none"}`,leading:e.React.createElement(c.Icon,{source:l.getAssetIDByName("ic_message_edit")}),onPress:function(){return o(!0)}}),e.React.createElement(c,{label:"Copy 3y3",subLabel:"Copy encoded color string",leading:e.React.createElement(c.Icon,{source:l.getAssetIDByName("copy")}),onPress:d})),e.React.createElement(A,{title:"Extras"},e.React.createElement(c,{label:"Discord Server",subLabel:"Join to Discord server for request profile avatar/banner/badge and choose decorations and effects.",leading:e.React.createElement(c.Icon,{source:l.getAssetIDByName("Discord")}),trailing:c.Arrow,onPress:function(){return e.url.openDeeplink("https://discord.gg/ffmkewQ4R7")}}),e.React.createElement(c,{label:"Refetch fakeProfile",leading:e.React.createElement(c.Icon,{source:l.getAssetIDByName("ic_message_retry")}),trailing:c.Arrow,onPress:async function(){return await B()?E.showToast("Refetched fakeProfile",l.getAssetIDByName("check")):E.showToast("Failed to refetch fakeProfile",l.getAssetIDByName("small"))}})),e.React.createElement(D,{visible:a,title:"Select Primary Color",initialValue:n.storage.sw_primary||"",onConfirm:function(s){n.storage.sw_primary=s,t(!1)},onCancel:function(){return t(!1)}}),e.React.createElement(D,{visible:r,title:"Select Accent Color",initialValue:n.storage.sw_accent||"",onConfirm:function(s){n.storage.sw_accent=s,o(!1)},onCancel:function(){return o(!1)}}))}const G=b.findByProps("default","getUserBannerURL"),M=b.findByStoreName("UserStore"),K=b.findByProps("getAvatarDecorationURL","default"),q=b.findByProps("isAnimatedAvatarDecoration"),J=b.findByName("useBadges",!1),Q=b.findByStoreName("UserProfileStore"),P=b.findByProps("getUserAvatarURL","getUserAvatarSource"),Y=b.findByProps("getProfileEffectById"),y="https://fakeprofile.sampath.me",X=y+"/users/all",Z="100101099222222",ee="100101099222224",{View:te,Image:ae,TouchableOpacity:re}=e.ReactNative,ne=function({name:a,image:t,size:r,margin:o,custom:i}){const d=e.stylesheet.createThemedStyleSheet({container:{flexDirection:"row",alignItems:"center",flexWrap:"wrap",justifyContent:"flex-end"},img:{width:r,height:r,resizeMode:"contain",marginHorizontal:o}}),s=function(){return i||e.React.createElement(re,{onPress:function(){return E.showToast(a)}},e.React.createElement(ae,{style:d.img,source:{uri:t}}))};return e.React.createElement(te,{style:d.container},s())},{View:ge}=e.ReactNative;let f={},U={},g=[],k=[],$={};const B=async function(){try{f=await(await I.safeFetch(X,{cache:"no-store"})).json(),U=await(await I.safeFetch(y+"/profile-effects",{cache:"no-store"})).json(),k=await(await I.safeFetch(y+"/badges",{cache:"no-store"})).json();const a=await(await I.safeFetch(y+"/decorations",{cache:"no-store"})).json();return $=Object.fromEntries(a.map(function(t){return[t.asset,{asset:t.asset,skuId:t.skuId,animated:t.animated}]})),f}catch(a){T.logger.error("Failed to fetch fakeProfile data",a)}};function oe(a){if(a==null)return null;const t=a.match(/\u{e005b}\u{e0023}([\u{e0061}-\u{e0066}\u{e0041}-\u{e0046}\u{e0030}-\u{e0039}]+?)\u{e002c}\u{e0023}([\u{e0061}-\u{e0066}\u{e0041}-\u{e0046}\u{e0030}-\u{e0039}]+?)\u{e005d}/u);if(t!=null){const r=[...t[0]].map(function(o){return String.fromCodePoint(o.codePointAt(0)-917504)}).join("");return r.substring(1,r.length-1).split(",").map(function(o){return parseInt(o.replace("#","0x"),16)})}else return null}const se=async function(){await B(),g.push(h.after("getUserProfile",Q,function(a,t){if(!t)return t;const r=oe(t.bio);return f[t.userId]?.profileEffectId&&n.storage.sw_effects&&(t.profileEffectId=t.profileEffectID=f[t.userId]?.profileEffectId,t.premiumType=2),r&&n.storage.sw_themes&&(t.themeColors=r,t.premiumType=2),t})),g.push(h.after("getUserAvatarURL",P,function([{id:a},t]){if(f[a]&&f[a].avatar&&n.storage.sw_avatars){const r=f[a].avatar.toString();if(t)return r;{const o=new URL(r).pathname.split("/").pop().replace("a_","");return`${y}/image/${o}`}}})),g.push(h.after("getUserAvatarSource",P,function([{id:a},t],r){if(f[a]&&f[a].avatar&&n.storage.sw_avatars){const o=f[a].avatar.toString();if(t)return{uri:o};{const i=new URL(o).pathname.split("/").pop().replace("a_","");return{uri:`${y}/image/${i}`}}}})),g.push(h.after("getUserBannerURL",G,function([a]){const t=Object.entries(f).find(function(r){return r[0]===a?.id});if(a?.banner===void 0&&t&&n.storage.sw_banners)return f[a?.id]?.banner})),g.push(h.after("getProfileEffectById",Y,function(a,t){return U[a]})),g.push(h.after("getUser",M,function(a,t){if(t&&f[t?.id]&&f[t?.id].decoration&&n.storage.sw_decorations){const r=f[t?.id];if(r?.decoration){const o=$[r.decoration];o&&(t.avatarDecoration={asset:o?.asset,skuId:o?.skuId})}t.avatarDecorationData=t.avatarDecoration}})),g.push(h.instead("getAvatarDecorationURL",K,function(a,t){const[{avatarDecoration:r,canAnimate:o}]=a;if(r?.skuId===ee){const i=r.asset.split("_");return!o&&i[0]==="a"&&i.shift(),y+`/avatar-decoration-presets/${i.join("_")}.png`}else if(r?.skuId===Z){const i=r.asset.split("_");return!o&&i[0]==="a"&&i.shift(),`https://cdn.discordapp.com/avatar-decoration-presets//${i.join("_")}.png`}else return t(...a)})),g.push(h.after("isAnimatedAvatarDecoration",q,function([a],t){if(e.ReactNative.Platform.OS==="ios"&&a?.asset?.startsWith("file://"))return!0})),g.push(h.after("default",J,function([a],t){if(!n.storage.sw_badges)return t;const r=a?.userId,o=k[r];if(!o?.length)return t;try{return[...o.map(function(i,d){return React.createElement(ne,{key:`fakeprofile-${r}-${d}`,name:i.description,image:i.icon,size:20,margin:2})}),...Array.isArray(t)?t:[]]}catch{return t}})),setInterval(async function(){await B()},36e5)},ie=function(){return g.forEach(function(a){return a()})},ce=H;return v.fetchData=B,v.onLoad=se,v.onUnload=ie,v.settings=ce,v})({},vendetta,vendetta.utils,vendetta.metro.common,vendetta.ui.components,vendetta.ui.assets,vendetta.metro,vendetta.patcher,vendetta.plugin,vendetta.ui.toasts,vendetta.storage);
